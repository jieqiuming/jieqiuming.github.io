---
layout: post
title: 一文读懂面向对象设计和编程
category: 软件工程
tags: OOP,软件工程
date: 2019-03-19
---


# 一文读懂面向对象设计和编程



## 一、面向对象设计理论


### 对象的三个基本特征

#### 封装



#### 继承



#### 多态（可替代性）

### 对象的关系

#### 聚合

> A has a B

#### 组合

> A has a B，A由B组成，B是A的一部分

#### 继承

> B is a A，A派生了B，B是A的一种

#### 依赖

> A use a B，A依赖B，A使用B



## 二、面向对象设计实践

### 重新认识对象

> 面向对象，就是只考虑它的意图，而不是实现机制

精髓在于封装，对象是有责任的实体，封装是隐藏一切“实现机制”，而只表现出对象的“意图”。



### 如何分解对象

> 按*变化*进行领域分解和设计

传统方法从问题域中寻找名词，并创建对象来表示，然后找到名词相关的动词，在对象中添加方法来实现这些动词，缺点是通常会导致类层次结构比预期更大。

应该尝试将问题域分解为责任，然后定义必需的对象来实现这些责任，让它对自己的行为负责。从另一个角度理解，”责任“就是对象的意图，也是”变化“。

发现变化，并且封装它！如何发现变化的地方？如if/switch语句往往预示着变化，作为通用的办法，可以使用共性和可变性分析方法（CVA）。

**共性分析**就是寻找共同的元素，找出不会随时间变化的结构，为架构提供长效的要素。

**可变性分析**就是揭示系列成员之间的不同，找到可变的结构，促进架构适应实际使用需要，可变性只有在给定了共性后才有意义。可利用**CVA分析矩阵**明确系统变化。



### 如何设计对象

软件开发三大视角：

1. 概念视角，软件要负责做什么？
2. 规约视角：怎样使用软件（接口如何）？
3. 实现视角：如何履行自己的职责？

结合这个三个视角，应该以如下步骤构建软件：

1. 先做初步设计，从概念视角出发，定义共性，规划对象意图（抽象对象或者接口），不操心实现细节。
2. 考虑对象如何协同工作，从规约视角出发，考虑使用什么接口处理所有责任，定义对象间的接口。
3. 实现这个设计，从实现视角出发，考虑基于给定变化，应该怎样根据给定的接口规约实现具体对象（派生类或者实现）

按变化设计由三个基本原则：

1. 针对接口进行编程。
2. 优先使用对象组合（聚集）。
3. 对变化的概念进行封装。

### 设计对象的接口



